import{g as J,E as K}from"./el-button-KODGcUAk.js";import{E as j,a as q,b as G,c as H,d as P}from"./el-breadcrumb-item-kq8HF2L8.js";import"./el-popper-Og59Ui8v.js";import{g as Q,r as R,E as v,e as W}from"./request-6xaLuRCl.js";import{E as X,a as Y,b as Z,c as ee}from"./el-select-7Nyx1hap.js";import{d as te,r as u,s as ae,c as g,a as t,w as l,b as y,I as s,o as h,e as r,F as T,M as D,J as E,K as le,L as oe,_ as se}from"./index-JNxmDIvZ.js";import"./aria-0Hc00wBd.js";const x=p=>(le("data-v-2251d3a6"),p=p(),oe(),p),ne={class:"my-3 flex items-center"},re=x(()=>s("div",{class:"min-w-fit"},"筛选订单：",-1)),ue={class:"mb-4"},de=x(()=>s("span",null,"当前状态:  ",-1)),ie=x(()=>s("span",null,"修改状态:  ",-1)),ce={class:"dialog-footer"},pe=te({__name:"order",setup(p){const f=u(""),V=u([]),d=u(!1),k=u(0),b=u("等待确认"),i=u(""),M=(o,a,_,w)=>(console.log(o,a,w),new Date(_).toLocaleString()),C=new Map([["等待确认","warning"],["订单完成","success"],["等待出餐","danger"]]),L=[{value:"等待确认",label:"等待确认"},{value:"订单完成",label:"订单完成"},{value:"等待出餐",label:"等待出餐"}];ae(()=>{c()});const N=[{text:"等待确认",value:"等待确认"},{text:"等待出餐",value:"等待出餐"},{text:"订单完成",value:"订单完成"}],c=async(o="")=>{let a=await Q(o);a.status===200&&(V.value=a.data.data.records)},$=o=>{Y.confirm("确认删除该订单？","删除订单",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",center:!0}).then(async()=>{await R(o),c(),v({type:"success",message:"删除成功"})}).catch(()=>{v({type:"info",message:"取消操作"})})},F=o=>{d.value=!0,k.value=o.id,b.value=o.status},O=async()=>{i.value==""?v.warning("请选择状态"):(await W({id:k.value,status:i.value})).status==200&&(v.success("修改成功"),d.value=!1,c())};return(o,a)=>{const _=H,w=j,B=ee,S=X,n=P,I=Z,m=K,U=q,z=G;return h(),g("div",null,[t(w,{"separator-icon":y(J),class:"mb-4"},{default:l(()=>[t(_,{to:{path:"/"}},{default:l(()=>[r("首页")]),_:1}),t(_,null,{default:l(()=>[r("订单详情")]),_:1})]),_:1},8,["separator-icon"]),s("div",ne,[re,t(S,{style:{width:"10%"},modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=e=>f.value=e),placeholder:"请选择",onChange:a[1]||(a[1]=e=>c(f.value)),clearable:"",onClear:c},{default:l(()=>[(h(),g(T,null,D(N,e=>t(B,{key:e.value,label:e.text,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),s("div",null,[t(U,{data:V.value,border:"",stripe:""},{default:l(()=>[t(n,{align:"center",width:"100",property:"tableNumber",label:"桌号","show-overflow-tooltip":""}),t(n,{align:"center",property:"dishs",label:"订单详情","show-overflow-tooltip":""}),t(n,{align:"center",property:"remark",label:"备注","show-overflow-tooltip":""}),t(n,{align:"center",property:"phone",width:"120",label:"手机号","show-overflow-tooltip":""}),t(n,{align:"center",width:"120",label:"总价格","show-overflow-tooltip":""},{default:l(e=>[s("span",null,E(e.row.totalAmount.toFixed(2)),1)]),_:1}),t(n,{align:"center",label:"状态",width:"100"},{default:l(e=>[t(I,{type:y(C).get(e.row.status)},{default:l(()=>[r(E(e.row.status),1)]),_:2},1032,["type"])]),_:1}),t(n,{align:"center",formatter:M,width:"180",label:"创建时间",property:"createTime"}),t(n,{align:"center",label:"操作",width:"150"},{default:l(e=>[t(m,{type:"primary",size:"small",onClick:A=>F(e.row)},{default:l(()=>[r("编辑")]),_:2},1032,["onClick"]),t(m,{type:"danger",size:"small",onClick:A=>$(e.row.id)},{default:l(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),t(z,{modelValue:d.value,"onUpdate:modelValue":a[4]||(a[4]=e=>d.value=e),title:"修改状态",width:"30%",center:"",onClose:a[5]||(a[5]=e=>i.value="")},{footer:l(()=>[s("span",ce,[t(m,{onClick:a[3]||(a[3]=e=>d.value=!1)},{default:l(()=>[r("取消")]),_:1}),t(m,{type:"primary",onClick:O},{default:l(()=>[r("确认")]),_:1})])]),default:l(()=>[s("div",ue,[de,t(I,{type:y(C).get(b.value)},{default:l(()=>[r(E(b.value),1)]),_:1},8,["type"])]),s("div",null,[ie,t(S,{modelValue:i.value,"onUpdate:modelValue":a[2]||(a[2]=e=>i.value=e),clearable:"",placeholder:"请选择"},{default:l(()=>[(h(),g(T,null,D(L,e=>t(B,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])])}}}),ye=se(pe,[["__scopeId","data-v-2251d3a6"]]);export{ye as default};
